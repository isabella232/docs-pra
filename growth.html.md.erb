---
title: Growth Beyond Minimum Viable Platform
owner: Customer[0]
---

<strong><%= modified_date %></strong>

Organic growth from Minimal Viable Platform is expected and encouraged. The next sections will offer considerations on growing from a lower to a higher level of fault tolerant architecture progressively.

## <a id='stretch_rack'></a>Single Cluster stretched across three racks

![Across Racks](./images/PRA_PAS_vSphere_NSX-T_MVP1_racks.png)
[View a larger version of this diagram](./images/PRA_PAS_vSphere_NSX-T_MVP1_racks.png).

**Key items that change are:**

* Two more racks are added to the original, making three racks
* Management functions do not change location
* The maximum number of hosts for this architecture is limited to 64 due to vSAN cluster limitations

By adding a three physical rack alignment, several features from different parts of the configuration align. Each pair of hosts in a rack is designated a [vSAN fault domain](https://docs.vmware.com/en/VMware-vSphere/6.5/com.vmware.vsphere.virtualsan.doc/GUID-8491C4B0-6F94-4023-8C7A-FD7B40D0368D.html). Fault domains enable you to protect against rack or chassis failure if your vSAN cluster spans across multiple racks or blade server chassis. You can create fault domains and add one or more hosts to each fault domain. Then, vSphere Host Group are defined to align to these three pairs of hosts which then can be consumed by PAS/PKS as a PCF availability zone.

Migration from the original rack to using the added racks is possible with PCF by modifying vSphere host group definition and performing a bosh recreate. The PaaS will deploy all components that can be deployed as multiples will be equally distributed across all AZs (as long as multiples selected are evenly divisible by the number of AZs used).

## <a id='multiple_cluster'></a>Multiple Cluster Design

PRA Multiple Cluster Design
![clusters](./images/PRA_vSphere_3Cluster_AZs_Only.png)
[View a larger version of this diagram](./images/PRA_vSphere_3Cluster_AZs_Only.png).

This third stage design is considered production-ready with ample high availability and redundancy capacity for full-time enterprise use. This size is appropriate for combined Enterprise PKS and PAS deployments combined, if desired, using Resource Pools within the host groups to organize components of each into the clusters.

**Key items that change at this point in growth**:

* A total of four clusters are deployed: one for management of the whole system and three for payloads generated by the system.
* All management functions are deployed onto a dedicated management cluster of six VxRail Appliance. The remaining three clusters are AZs for PCF product(s) and for payload (app) use only.
* All PaaS components that deploy in multiples, are deployed in group of three to take advantage of three availability zones. HA features of both the IaaS and PaaS are brought to bear on the AZs.

Migration from the Starter Kit may be a challenge, as all management VMs from vSphere, NSX-T Data Center and Pivotal will be migrated to a dedicated cluster and not blended in with any of the app containers created by Enterprise PKS and/or PAS.

A fresh install of the PaaS layer makes this model the easiest to install, as it will give the opportunity to place management components in the proper cluster and evacuate any pre-existing clusters of anything other than payload (app) components.

## <a id='pks_multiple_cluster'></a>Enterprise PKS Multiple Cluster Design

![PKS clusters](./images/PRA_PKS_vSphere_NSX-T_MVP2.png)
[View a larger version of this diagram](./images/PRA_PKS_vSphere_NSX-T_MVP2.png).
